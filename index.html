<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ CS:GO Style Case Opening</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --tg-bg: #1a1a1a;
            --tg-text: #ffffff;
            --tg-secondary: #2d2d2d;
            --tg-accent: #3a3a3a;
            --tg-button: #4CAF50;
        }
        
        body {
            font-family: 'Segoe UI', Roboto, sans-serif;
            background: var(--tg-theme-bg-color, var(--tg-bg));
            color: var(--tg-theme-text-color, var(--tg-text));
            margin: 0;
            padding: 0;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
        }
        
        .header {
            background: rgba(0, 0, 0, 0.7);
            width: 100%;
            padding: 15px 0;
            text-align: center;
            position: relative;
            z-index: 10;
        }
        
        .balance {
            display: inline-block;
            background: #4CAF50;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .case-container {
            position: relative;
            width: 100%;
            height: 60vh;
            perspective: 1000px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .case {
            width: 250px;
            height: 180px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 1s;
        }
        
        .case-front, .case-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            background: linear-gradient(135deg, #ff9500, #ffcc00);
            border-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(255, 165, 0, 0.5);
            border: 3px solid #ffcc00;
        }
        
        .case-back {
            background: linear-gradient(135deg, #4CAF50, #8BC34A);
            transform: rotateY(180deg);
            border: 3px solid #8BC34A;
        }
        
        .items-container {
            position: absolute;
            width: 100%;
            height: 100px;
            bottom: 0;
            overflow-x: auto;
            overflow-y: hidden;
            white-space: nowrap;
            padding: 20px 0;
            background: rgba(0, 0, 0, 0.5);
        }
        
        .item {
            display: inline-block;
            width: 80px;
            height: 80px;
            margin: 0 10px;
            background: var(--tg-theme-secondary-bg-color, var(--tg-secondary));
            border-radius: 10px;
            position: relative;
            transition: transform 0.3s;
        }
        
        .item:hover {
            transform: scale(1.1);
        }
        
        .item-icon {
            font-size: 40px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .item-rarity {
            position: absolute;
            bottom: 5px;
            right: 5px;
            font-size: 12px;
            background: rgba(0, 0, 0, 0.7);
            padding: 2px 5px;
            border-radius: 5px;
        }
        
        .rarity-common { color: #b0c3d9; }
        .rarity-uncommon { color: #5e98d9; }
        .rarity-rare { color: #4b69ff; }
        .rarity-mythical { color: #8847ff; }
        .rarity-legendary { color: #d32ce6; }
        .rarity-ancient { color: #eb4b4b; }
        
        .open-button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            font-size: 18px;
            font-weight: bold;
            margin: 20px 0;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .open-button:hover {
            background: #45a049;
        }
        
        .open-button:disabled {
            background: #666;
            cursor: not-allowed;
        }
        
        @keyframes spin {
            0% { transform: rotateY(0); }
            100% { transform: rotateY(360deg); }
        }
        
        @keyframes item-scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }
        
        .spinning {
            animation: spin 0.5s linear infinite;
        }
        
        .won-item {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            z-index: 100;
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            animation: item-reveal 1s forwards;
        }
        
        @keyframes item-reveal {
            0% { transform: translate(-50%, -50%) scale(0); }
            50% { transform: translate(-50%, -50%) scale(1.2); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }
    </style>
</head>
<body>
    <div class="header">
        <h2>üéÆ CS:GO Style Case Opening</h2>
        <div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="balance">1000</span> ‚ÇΩ</div>
    </div>
    
    <div class="case-container">
        <div class="case" id="case">
            <div class="case-front">CS:GO CASE</div>
            <div class="case-back">OPEN ME!</div>
        </div>
    </div>
    
    <button class="open-button" id="open-button">–û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å (500 ‚ÇΩ)</button>
    
    <div class="items-container" id="items-container">
        <!-- Items will be added by JavaScript -->
    </div>
    
    <script>
        const tg = Telegram.WebApp;
        tg.expand();
        
        // Game data
        let balance = 1000;
        const casePrice = 500;
        const items = [
            { emoji: "üî´", name: "Glock-18", rarity: "common", price: 100 },
            { emoji: "üî™", name: "–ù–æ–∂", rarity: "legendary", price: 2000 },
            { emoji: "üõ°Ô∏è", name: "–ë—Ä–æ–Ω—è", rarity: "uncommon", price: 200 },
            { emoji: "üéØ", name: "AWP", rarity: "rare", price: 500 },
            { emoji: "üí£", name: "–ì—Ä–∞–Ω–∞—Ç–∞", rarity: "common", price: 50 },
            { emoji: "üî´", name: "AK-47", rarity: "mythical", price: 800 },
            { emoji: "üé©", name: "–®–ª—è–ø–∞", rarity: "uncommon", price: 150 },
            { emoji: "üëÅÔ∏è", name: "–î—Ä–µ–≤–Ω–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç", rarity: "ancient", price: 5000 }
        ];
        
        // DOM elements
        const caseEl = document.getElementById('case');
        const openButton = document.getElementById('open-button');
        const itemsContainer = document.getElementById('items-container');
        const balanceEl = document.getElementById('balance');
        
        // Initialize items
        function initItems() {
            itemsContainer.innerHTML = '';
            items.forEach(item => {
                const itemEl = document.createElement('div');
                itemEl.className = 'item';
                itemEl.innerHTML = `
                    <div class="item-icon">${item.emoji}</div>
                    <div class="item-rarity rarity-${item.rarity}">${item.name}</div>
                `;
                itemsContainer.appendChild(itemEl);
            });
        }
        
        // Open case function
        function openCase() {
            if (balance < casePrice) {
                tg.showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!");
                return;
            }
            
            balance -= casePrice;
            balanceEl.textContent = balance;
            openButton.disabled = true;
            
            // Start spinning animation
            caseEl.style.transform = 'rotateY(720deg)';
            
            // Scroll items
            itemsContainer.style.animation = 'item-scroll 5s linear forwards';
            
            setTimeout(() => {
                // Stop on random item
                const winnerIndex = Math.floor(Math.random() * items.length);
                const winnerItem = items[winnerIndex];
                
                // Add winnings to balance
                balance += winnerItem.price;
                balanceEl.textContent = balance;
                
                // Show winner item
                const wonItemEl = document.createElement('div');
                wonItemEl.className = 'won-item';
                wonItemEl.innerHTML = `
                    <div style="font-size: 50px;">${winnerItem.emoji}</div>
                    <h3>${winnerItem.name}</h3>
                    <div class="rarity-${winnerItem.rarity}" style="font-weight: bold;">${winnerItem.rarity.toUpperCase()}</div>
                    <p>+${winnerItem.price} ‚ÇΩ</p>
                `;
                document.body.appendChild(wonItemEl);
                
                // Reset animations
                setTimeout(() => {
                    caseEl.style.transform = 'rotateY(0)';
                    itemsContainer.style.animation = 'none';
                    wonItemEl.remove();
                    openButton.disabled = false;
                    initItems(); // Reset items
                }, 3000);
                
            }, 5000);
        }
        
        // Event listeners
        openButton.addEventListener('click', openCase);
        
        // Initialize
        initItems();
    </script>
</body>
</html>
